<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciar Produtos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/produtos.css') }}">
</head>
<body>
    <nav class="navbar">
        <h1>üè™ Lista de Produtos</h1>
        <div class="nav-actions">
            <button class="btn-add" onclick="abrirModalAdicionar()">‚ûï Adicionar Produto</button>
            <a href="/gerente" class="btn-back">Voltar</a>
        </div>
    </nav>

    <div class="container">
        <div class="produtos-grid">
            {% for produto in produtos %}
            <div class="produto-card">
                <div class="produto-header">
                    <div class="produto-nome">{{ produto.nome_produto }}</div>
                    <div class="produto-categoria">{{ produto.nome_categoria }}</div>
                </div>
                <div class="produto-info">
                    <div class="info-row">
                        <span class="info-label">Pre√ßo:</span>
                        <span class="info-value">R$ {{ "%.2f"|format(produto.preco_venda) }}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Estoque:</span>
                        <span class="info-value">{{ produto.quantidade_estoque }}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Vendidos:</span>
                        <span class="info-value">{{ produto.vendidos or 0 }}</span>
                    </div>
                </div>
                <div class="produto-actions">
                    <button class="btn-edit" onclick="editarProduto(
                        '{{ produto.id_produto }}',
                        '{{ produto.nome_produto }}',
                        '{{ produto.descricao }}',
                        '{{ produto.preco_custo }}',
                        '{{ produto.preco_venda }}',
                        '{{ produto.quantidade_estoque }}',
                        '{{ produto.estoque_minimo }}',
                        '{{ produto.id_categoria }}'
                    )">‚úèÔ∏è Editar</button>

                    <button class="btn-stock" onclick="reestocarProduto('{{ produto.id_produto }}', '{{ produto.nome_produto }}')">üì¶ Reestocar</button>

                    <button class="btn-delete" onclick="deletarProduto('{{ produto.id_produto }}', '{{ produto.nome_produto }}')">üóëÔ∏è Excluir</button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Modal para Adicionar -->
    <div id="modalAdicionar" class="modal">
        <div class="modal-content">
            <h2>Adicionar Produto</h2>
            <form onsubmit="adicionarProduto(event)">
                <label>Nome:</label>
                <input type="text" name="nome" required>

                <label>Descri√ß√£o:</label>
                <input type="text" name="descricao">

                <label>Pre√ßo de Custo:</label>
                <input type="number" step="0.01" name="preco_custo" required>

                <label>Pre√ßo de Venda:</label>
                <input type="number" step="0.01" name="preco_venda" required>

                <label>Quantidade:</label>
                <input type="number" name="quantidade" required>

                <label>Estoque M√≠nimo:</label>
                <input type="number" name="estoque_minimo" required>

                <label>Categoria:</label>
                <select name="id_categoria" required>
                    {% for c in categorias %}
                        <option value="{{ c.id_categoria }}">{{ c.nome_categoria }}</option>
                    {% endfor %}
                </select>

                <div class="modal-buttons">
                    <button type="submit" class="btn-confirm">Salvar</button>
                    <button type="button" class="btn-cancel" onclick="fecharModal('modalAdicionar')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/produtos.js') }}"></script>
</body>
</html>
